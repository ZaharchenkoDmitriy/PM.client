<div *ngIf="popUpOpened" id="pop-up-background" (click)="popUpOpened = false;">
  <div id="container"
       (click)="$event.stopPropagation()">
    <div id="pop-up-navigation">
      <ul>
        <li *ngFor="let state of popUpService.currentStates"
            [style.width]="100/popUpService.currentStates.length + '%'"
            [class]="state.number == popUpService.currentState.number ? 'active' : ''">
        </li>
      </ul>
    </div>
    <div style="width: 95%; margin-left: 2.5%;" ngSwitch="{{popUpService.currentState.title}}">
      <div *ngSwitchCase="'work'">
        <app-create-work [worksService]="worksService" (close)="popUpOpened = false"></app-create-work>
      </div>
    </div>
  </div>
</div>

<div *ngIf="project">
  <div id="project-info">
    <h2>{{project.title}}</h2>
    <ul>
      <li><span>Адресс: </span>{{project.address}}</li>
      <li><span>Период работы над проектом: </span>{{ project.dateStart | date : "dd.MM.y" }} - {{ project.dateEnd | date : "dd.MM.y" }}</li>
      <li><span>Стоимость проекта: </span>{{project.projectCost}}</li>
    </ul>
  </div>

  <div id="headers">
    <span style="width: 70%">Работа</span>
    <div id='add-category-button' (click)="openAddWorkForm()"></div>
    <span style="width: 25%; text-align: end">Квадратура/Стоимость</span>
  </div>
  <ul id="accordion">
    <ul class="card" *ngFor="let category of [{id: 1, title: 'Ex'}, {id: 2, title: 'Ex2'}]">
      <div id="category" class="card-header"
           [attr.data-target]='"#collapse" + category.id'
           data-toggle="collapse">
        <div class="category-title">{{category.title}}</div>
      </div>
      <ul id="collapse{{category.id}}"
          class="collapse"
          data-parent="#accordion">
        <div class="card-body work">
          <li *ngFor="let work of works | async">
            <button (click)="removeWork(work)"> Удалить </button>
            <span>{{work.title}}</span>
            <span style="float: right">{{work.square}}/{{work.cost}}</span>
          </li>
        </div>
      </ul>
    </ul>
  </ul>
</div>


